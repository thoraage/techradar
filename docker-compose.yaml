version: '3.6'
services:
  postgres:
    image: postgres:12
    restart: always
    volumes:
    - db_data:/var/lib/postgresql/data
    environment:
      POSTGRES_PASSWORD: postgrespassword
  graphql-engine:
    image: hasura/graphql-engine:v2.11.0
    ports:
    - "8080:8080"
    depends_on:
    - "postgres"
    restart: always
    environment:
      ## postgres database to store Hasura metadata
      HASURA_GRAPHQL_METADATA_DATABASE_URL: postgres://postgres:postgrespassword@postgres:5432/postgres
      ## this env var can be used to add the above postgres database to Hasura as a data source. this can be removed/updated based on your needs
      PG_DATABASE_URL: postgres://postgres:postgrespassword@postgres:5432/postgres
      ## enable the console served by server
      HASURA_GRAPHQL_ENABLE_CONSOLE: "false" # set to "false" to disable console
      ## enable debugging mode. It is recommended to disable this in production
      HASURA_GRAPHQL_DEV_MODE: "true"
      HASURA_GRAPHQL_ENABLED_LOG_TYPES: startup, http-log, webhook-log, websocket-log, query-log
      ## uncomment next line to set an admin secret
      HASURA_GRAPHQL_ADMIN_SECRET: fredag13
#      HASURA_GRAPHQL_JWT_SECRET: '{"type": "RS256", "key": "-----BEGIN CERTIFICATE-----\nMIIDATCCAemgAwIBAgIJf9lq9Yr6lJKyMA0GCSqGSIb3DQEBCwUAMB4xHDAaBgNV\nBAMTE3RlY2hyYWRhci5hdXRoMC5jb20wHhcNMTkwNDI4MTkzNDUxWhcNMzMwMTA0\nMTkzNDUxWjAeMRwwGgYDVQQDExN0ZWNocmFkYXIuYXV0aDAuY29tMIIBIjANBgkq\nhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA4iMROEB9I8mQ2FPO2Hb0QOIELf0NmND9\nhPQ/1u3eR99miM945mO62wrjdMhtRFd5xo2Lq75V3kGR+P+uoXGmhQUZI6DjNMid\nUTu1W6mHyeNMuntF29/FPCdaPJPAcdnAdU3StHrFgUOpcoeKvI2yqtoGVOgqh9R7\nBZun6NbDeMwoIyZWVs1fX4NSbs7MgunLqex79fNq9AyE5GAlkJTSwqK2ya/J3/yH\nfES0WC1qhNtboXQanYonqkIsbqS1TF7/CrPQ0dSEnn8GACOoFBfwSMrX4NXVcLQA\n7oPSsP8bdpO8rrZvMeNP4rp3A8rLLVzIlHB5h6spukz4XtUoIsJfXwIDAQABo0Iw\nQDAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBROVK5w5GvwtpEiOh7wq5uahBQY\ngDAOBgNVHQ8BAf8EBAMCAoQwDQYJKoZIhvcNAQELBQADggEBACIhs+cJCTAt0Dbt\nPwsIVW2nAe1IXTk7OB7bkbeXdsiRgEv+YjTxhtj4KDM5His1mSmhXa7cKWe1VCz1\nxHG2gcyFR3NtIvzSmeGe0lXlM+xIL5eG5clmX9ZGwZbrNR18x7EcZBHgJ24+KecB\nTC8ZbdnzA1WkO/5MxNb4zuzQqetrSIZm0nrF1ciQ+/skcx4P6RefDfWn07bmfTK8\n+jApncrKVPqyMudnA0De1Fv/BGloFiNH3d/88nTKr3CfsQLUCRntsEFmWqv/5QsF\nM99B2+2BFgSonAHXcHuTy64gQu/tB2IVlVGQAcg0Ddu2LKEsihgbd8ebNw80i/L7\npQOjoZc=\n-----END CERTIFICATE-----"}'
#      HASURA_GRAPHQL_JWT_SECRET: '{"type": "RS256", "key": "-----BEGIN CERTIFICATE-----\nMIIDATCCAemgAwIBAgIJEG1mq98HiWPIMA0GCSqGSIb3DQEBCwUAMB4xHDAaBgNVBAMTE3RlY2hyYWRhci5hdXRoMC5jb20wHhcNMjAwMzEzMDQ1MDUwWhcNMzMxMTIwMDQ1MDUwWjAeMRwwGgYDVQQDExN0ZWNocmFkYXIuYXV0aDAuY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA4S60C0EMkNPvtJzjKBCND78E+V8g4NpHGVgojB3lm7RcEheBU7Qb+RpHlUG9OtPLLZXUjzcdIAXeDa0UChA/wYZr6XW5F26J62Fr1t+X3KqMbqHGjjksaSgXPY58YZJJ9XPvDygwLL7Sm96DoiO7u3ez25WgnB/NrMM7piZGf7kmEkIJX1c1zoTYuI7LQHLtV7rFc3vi6aHMp7AoL6RVdeIYXGvGH2ADbdbvytOoG6d5IS3V1vzY3qEUPN3m2r3n3c+50CPy5iyu43zU9Ozik69zgZLms/Mbvnj798P9TO24Id66EngnzZiMXIpK6uAh01tVbP/07vPGqAcCQC97LwIDAQABo0IwQDAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBQokw3/fXGb1vFELNu+dcgYJ7z+rjAOBgNVHQ8BAf8EBAMCAoQwDQYJKoZIhvcNAQELBQADggEBACjrv2HGVJtXiaqRmMOHf+AvN/fYHpTy1k42bRxKuVVT29H1Hw5NZ2w0cTOvzb94O4kWRkxuW4w1gohE26MBfIemJitiPq7llT8x+WPUscZDAkhkJuDQntbelt46qUW5fzjdYaY32I153Xtjt2r+OKgFSo9Qa0KI/iJn4LTCfG/aaMChERJoT1DNiIInFIloKYEPkHYpTW7YdJKedyGSe/8HF3mI8Lvd2hR7jxv0QMxGz0w5LZSbRbV0WmUBIK3lNKNl5a9CsFDHtFW94Jid2TMlOdHq+eewSL2LkOwW9pErv2bCLkOxSPTrJpRclFo98KNDDpICzLZTSypNzHCBJSI=\n-----END CERTIFICATE-----"}'
      HASURA_GRAPHQL_JWT_SECRET: '{"type": "RS256", "key": "-----BEGIN CERTIFICATE-----\nMIIDBzCCAe+gAwIBAgIJRg6R17grT1FiMA0GCSqGSIb3DQEBCwUAMCExHzAdBgNV\nBAMTFnRlY2hyYWRhci5ldS5hdXRoMC5jb20wHhcNMjIwNzI5MTkyODM5WhcNMzYw\nNDA2MTkyODM5WjAhMR8wHQYDVQQDExZ0ZWNocmFkYXIuZXUuYXV0aDAuY29tMIIB\nIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAyWf42AG6602quVGv1wqAtrND\n6emfLgseBL4/JunvMnU/ZrM18y/hWw/nIr7QTkGL+1kxZAsVExz1C9QknBvuc6+y\ntjkI+Rw2PegtDlXc3x1QD37BfHhJy0ieeLjf3KUGMPmMXezRDkKpyNRYK1w/Oq3U\nWz2tdDmtieGcBbBZljXHop5x+WUCJ/503JsQmKu+0udHKBT1J4Amf94xpibsjsY0\n8QN4qM8hZp5/ppS/8Y/OE7rlONOIpcezBVFjUQIyadd19CDyl/H8DcM/d3b1cihR\ny67XROSLsOtHDRchW2/f1N80qr5vuf4szC/0TRUSSBf6AAjS42k5YqvnqjrXTwID\nAQABo0IwQDAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBQdlyHZF2wOWetAtvvn\n0FaranW04DAOBgNVHQ8BAf8EBAMCAoQwDQYJKoZIhvcNAQELBQADggEBABv2vsme\neWOIbPT0owmj0q1geArDN0f5+lclLoh1s6yaZeSlNYBrJfZVW+A5XtoyaHEcFRq3\nuPu1eDgY/6KPgAps73Qr9LklubQgc6SGDgoRueqY8u6ee8bGqBXT7eGZZGGzQrT2\n2YKa49+NqiBQtHDZgp8OWvN5Stivmb2Jl+Ity6fWSFF3nz1f6Gb1DOx7uDvhWuus\nqAZ7Rrtg+fc9tBpaBNJfjmpbNtUj7RNBMWuLHGnAHQ1y/0pfgCoRU0CzUqR7mOo8\nvL5QkF5fzJjI0ZC84LCNFKK0KiSD8hh5ed5pS5RI91Nni7kaKM2HEGFleBT1/Q8k\nXmt7gMlCNLxm+OU=\n-----END CERTIFICATE-----"}'
#      HASURA_GRAPHQL_JWT_SECRET: '{"jwk_url": "https://techradar.auth0.com/.well-known/jwks.json","audience": "tech-radar"}'

      ## unauthorized role
      HASURA_GRAPHQL_UNAUTHORIZED_ROLE: unauthorized
volumes:
  db_data:

